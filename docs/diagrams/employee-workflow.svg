<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1225px" preserveAspectRatio="none" style="width:1041px;height:1225px;" version="1.1" viewBox="0 0 1041 1225" width="1041px" zoomAndPan="magnify"><defs><filter height="300%" id="f1152k3vxrmpjy" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><rect width="100%" height="100%" fill="#FFFFFF"/><g><rect fill="#FFFFFF" filter="url(#f1152k3vxrmpjy)" height="753.9297" style="stroke: #000000; stroke-width: 2.0;" width="1017" x="13" y="161.5625"/><rect fill="#FFFFFF" filter="url(#f1152k3vxrmpjy)" height="664.5313" style="stroke: #000000; stroke-width: 2.0;" width="997" x="23" y="243.9609"/><rect fill="#FFFFFF" filter="url(#f1152k3vxrmpjy)" height="133.6641" style="stroke: #000000; stroke-width: 2.0;" width="977" x="33" y="297.2266"/><rect fill="#FFFFFF" filter="url(#f1152k3vxrmpjy)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="977" x="33" y="444.8906"/><rect fill="#FFFFFF" filter="url(#f1152k3vxrmpjy)" height="206.7344" style="stroke: #000000; stroke-width: 2.0;" width="977" x="33" y="592.5547"/><rect fill="#FFFFFF" height="73.0703" style="stroke: none; stroke-width: 1.0;" width="977" x="33" y="726.2188"/><rect fill="#FFFFFF" height="43.9375" style="stroke: none; stroke-width: 1.0;" width="997" x="23" y="864.5547"/><rect fill="#FFFFFF" filter="url(#f1152k3vxrmpjy)" height="133.6641" style="stroke: #000000; stroke-width: 2.0;" width="977" x="33" y="929.4922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="80" x2="80" y1="86.2969" y2="1138.4219"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="702" x2="702" y1="86.2969" y2="1138.4219"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="952" x2="952" y1="86.2969" y2="1138.4219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="43" y="82.9951">Employee</text><ellipse cx="80" cy="13" fill="#FEFECE" filter="url(#f1152k3vxrmpjy)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M80,21 L80,48 M67,29 L93,29 M80,48 L67,63 M80,48 L93,63 " fill="none" filter="url(#f1152k3vxrmpjy)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="43" y="1150.417">Employee</text><ellipse cx="80" cy="1163.7188" fill="#FEFECE" filter="url(#f1152k3vxrmpjy)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M80,1171.7188 L80,1198.7188 M67,1179.7188 L93,1179.7188 M80,1198.7188 L67,1213.7188 M80,1198.7188 L93,1213.7188 " fill="none" filter="url(#f1152k3vxrmpjy)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1152k3vxrmpjy)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="617" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="624" y="70.9951">ServicePointController</text><rect fill="#FEFECE" filter="url(#f1152k3vxrmpjy)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="617" y="1137.4219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="624" y="1157.417">ServicePointController</text><rect fill="#FEFECE" filter="url(#f1152k3vxrmpjy)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="92" x="904" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="911" y="70.9951">VisitService</text><rect fill="#FEFECE" filter="url(#f1152k3vxrmpjy)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="92" x="904" y="1137.4219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="911" y="1157.417">VisitService</text><polygon fill="#A80036" points="690,113.4297,700,117.4297,690,121.4297,694,117.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="80" x2="696" y1="117.4297" y2="117.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="87" y="112.3638">POST /servicepoint/.../open</text><polygon fill="#A80036" points="940,142.5625,950,146.5625,940,150.5625,944,146.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="946" y1="146.5625" y2="146.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="709" y="141.4966">openServicePoint(...)</text><path d="M13,161.5625 L90,161.5625 L90,168.5625 L80,178.5625 L13,178.5625 L13,161.5625 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="753.9297" style="stroke: #000000; stroke-width: 2.0;" width="1017" x="13" y="161.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="28" y="174.6294">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="131" x="105" y="173.7729">[Работа с визитами]</text><polygon fill="#A80036" points="690,195.8281,700,199.8281,690,203.8281,694,199.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="80" x2="696" y1="199.8281" y2="199.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="87" y="194.7622">POST /servicepoint/.../confirmed/visits/call</text><polygon fill="#A80036" points="940,224.9609,950,228.9609,940,232.9609,944,228.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="946" y1="228.9609" y2="228.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="709" y="223.895">callNextVisit(...)</text><path d="M23,243.9609 L87,243.9609 L87,250.9609 L77,260.9609 L23,260.9609 L23,243.9609 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="664.5313" style="stroke: #000000; stroke-width: 2.0;" width="997" x="23" y="243.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="38" y="257.0278">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="98" x="102" y="256.1714">[визит найден]</text><polygon fill="#A80036" points="91,278.2266,81,282.2266,91,286.2266,87,282.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="85" x2="701" y1="282.2266" y2="282.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="27" x="97" y="277.1606">Visit</text><path d="M33,297.2266 L103,297.2266 L103,304.2266 L93,314.2266 L33,314.2266 L33,297.2266 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="133.6641" style="stroke: #000000; stroke-width: 2.0;" width="977" x="33" y="297.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="48" y="310.2935">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="202" x="118" y="309.437">[фиксация фактических услуг]</text><polygon fill="#A80036" points="690,331.4922,700,335.4922,690,339.4922,694,335.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="80" x2="696" y1="335.4922" y2="335.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="378" x="87" y="330.4263">POST /servicepoint/.../deliveredservice/{deliveredServiceId}</text><polygon fill="#A80036" points="940,360.625,950,364.625,940,368.625,944,364.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="946" y1="364.625" y2="364.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="709" y="359.5591">addDeliveredService(...)</text><polygon fill="#A80036" points="690,389.7578,700,393.7578,690,397.7578,694,393.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="80" x2="696" y1="393.7578" y2="393.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="529" x="87" y="388.6919">POST /servicepoint/.../deliveredService/{deliveredServiceId}/outcome/{outcomeId}</text><polygon fill="#A80036" points="940,418.8906,950,422.8906,940,426.8906,944,422.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="946" y1="422.8906" y2="422.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="709" y="417.8247">addOutcomeOfDeliveredService(...)</text><path d="M33,444.8906 L103,444.8906 L103,451.8906 L93,461.8906 L33,461.8906 L33,444.8906 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="977" x="33" y="444.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="48" y="457.9575">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="85" x="118" y="457.1011">[итог услуги]</text><polygon fill="#A80036" points="690,479.1563,700,483.1563,690,487.1563,694,483.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="80" x2="696" y1="483.1563" y2="483.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="284" x="87" y="478.0903">POST /servicepoint/.../outcome/{outcomeId}</text><polygon fill="#A80036" points="940,508.2891,950,512.2891,940,516.2891,944,512.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="946" y1="512.2891" y2="512.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="709" y="507.2231">addOutcomeService(...)</text><polygon fill="#A80036" points="690,544.4219,700,548.4219,690,552.4219,694,548.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="80" x2="696" y1="548.4219" y2="548.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="543" x="87" y="543.356">POST /servicepoint/.../visits/servicePoints/{servicePointId}/confirmed/confirm/{visitId}</text><polygon fill="#A80036" points="940,573.5547,950,577.5547,940,581.5547,944,577.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="946" y1="577.5547" y2="577.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="709" y="572.4888">visitConfirm(...)</text><path d="M33,592.5547 L97,592.5547 L97,599.5547 L87,609.5547 L33,609.5547 L33,592.5547 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="206.7344" style="stroke: #000000; stroke-width: 2.0;" width="977" x="33" y="592.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="48" y="605.6216">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="135" x="112" y="604.7651">[требуется перевод]</text><polygon fill="#A80036" points="690,626.8203,700,630.8203,690,634.8203,694,630.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="80" x2="696" y1="630.8203" y2="630.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="436" x="87" y="625.7544">PUT /servicepoint/.../queue/{queueId}/visit/transferFromServicePoint</text><polygon fill="#A80036" points="940,655.9531,950,659.9531,940,663.9531,944,659.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="946" y1="659.9531" y2="659.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="709" y="654.8872">visitTransfer(...)</text><polygon fill="#A80036" points="690,685.0859,700,689.0859,690,693.0859,694,689.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="80" x2="696" y1="689.0859" y2="689.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="402" x="87" y="684.02">PUT /servicepoint/.../poolServicePoint/{poolSpId}/visit/put_back</text><polygon fill="#A80036" points="940,714.2188,950,718.2188,940,722.2188,944,718.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="946" y1="718.2188" y2="718.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="199" x="709" y="713.1528">visitBackToServicePointPool(...)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="33" x2="1010" y1="727.2188" y2="727.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="123" x="38" y="737.4292">[повторный вызов]</text><polygon fill="#A80036" points="690,758.1563,700,762.1563,690,766.1563,694,762.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="80" x2="696" y1="762.1563" y2="762.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="529" x="87" y="757.0903">POST /servicepoint/.../visits/servicePoints/{servicePointId}/confirmed/recall/{visitId}</text><polygon fill="#A80036" points="940,787.2891,950,791.2891,940,795.2891,944,791.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="946" y1="791.2891" y2="791.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="709" y="786.2231">visitReCallForConfirm(...)</text><polygon fill="#A80036" points="690,823.4219,700,827.4219,690,831.4219,694,827.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="80" x2="696" y1="827.4219" y2="827.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="583" x="87" y="822.356">PUT /servicepoint/.../visits/servicePoints/{servicePointId}/visit/end?reason=услуга_оказана</text><polygon fill="#A80036" points="940,852.5547,950,856.5547,940,860.5547,944,856.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="946" y1="856.5547" y2="856.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="709" y="851.4888">visitEnd(...)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="23" x2="1020" y1="865.5547" y2="865.5547"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="106" x="28" y="875.7651">[очередь пуста]</text><polygon fill="#A80036" points="91,896.4922,81,900.4922,91,904.4922,87,900.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="85" x2="701" y1="900.4922" y2="900.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="97" y="895.4263">204 No Content</text><path d="M33,929.4922 L103,929.4922 L103,936.4922 L93,946.4922 L33,946.4922 L33,929.4922 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="133.6641" style="stroke: #000000; stroke-width: 2.0;" width="977" x="33" y="929.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="48" y="942.5591">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="68" x="118" y="941.7026">[Перерыв]</text><polygon fill="#A80036" points="690,963.7578,700,967.7578,690,971.7578,694,967.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="80" x2="696" y1="967.7578" y2="967.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="598" x="87" y="962.6919">POST /servicepoint/.../servicePoints/{servicePointId}/close?isBreak=true&amp;breakReason=обед</text><polygon fill="#A80036" points="940,992.8906,950,996.8906,940,1000.8906,944,996.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="946" y1="996.8906" y2="996.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="709" y="991.8247">closeServicePoint(...)</text><polygon fill="#A80036" points="690,1022.0234,700,1026.0234,690,1030.0234,694,1026.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="80" x2="696" y1="1026.0234" y2="1026.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="87" y="1020.9575">POST /servicepoint/.../open</text><polygon fill="#A80036" points="940,1051.1563,950,1055.1563,940,1059.1563,944,1055.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="946" y1="1055.1563" y2="1055.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="709" y="1050.0903">openServicePoint(...)</text><polygon fill="#A80036" points="690,1087.2891,700,1091.2891,690,1095.2891,694,1091.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="80" x2="696" y1="1091.2891" y2="1091.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="520" x="87" y="1086.2231">POST /servicepoint/.../servicePoints/{servicePointId}/close?reason=конец_смены</text><polygon fill="#A80036" points="940,1116.4219,950,1120.4219,940,1124.4219,944,1120.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="946" y1="1120.4219" y2="1120.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="709" y="1115.356">closeServicePoint(...)</text><!--MD5=[bd0876415b827c32422002c9a795ed5b]
@startuml
skinparam backgroundColor #FFFFFF
actor Employee
participant API as "ServicePointController"
participant Visit as "VisitService"

Employee -> API: POST /servicepoint/.../open
API -> Visit: openServicePoint(...)

loop Работа с визитами
  Employee -> API: POST /servicepoint/.../confirmed/visits/call
  API -> Visit: callNextVisit(...)
  alt визит найден
    API - -> Employee: Visit
    opt фиксация фактических услуг
      Employee -> API: POST /servicepoint/.../deliveredservice/{deliveredServiceId}
      API -> Visit: addDeliveredService(...)
      Employee -> API: POST /servicepoint/.../deliveredService/{deliveredServiceId}/outcome/{outcomeId}
      API -> Visit: addOutcomeOfDeliveredService(...)
    end
    opt итог услуги
      Employee -> API: POST /servicepoint/.../outcome/{outcomeId}
      API -> Visit: addOutcomeService(...)
    end
    Employee -> API: POST /servicepoint/.../visits/servicePoints/{servicePointId}/confirmed/confirm/{visitId}
    API -> Visit: visitConfirm(...)
    alt требуется перевод
      Employee -> API: PUT /servicepoint/.../queue/{queueId}/visit/transferFromServicePoint
      API -> Visit: visitTransfer(...)
      Employee -> API: PUT /servicepoint/.../poolServicePoint/{poolSpId}/visit/put_back
      API -> Visit: visitBackToServicePointPool(...)
    else повторный вызов
      Employee -> API: POST /servicepoint/.../visits/servicePoints/{servicePointId}/confirmed/recall/{visitId}
      API -> Visit: visitReCallForConfirm(...)
    end
    Employee -> API: PUT /servicepoint/.../visits/servicePoints/{servicePointId}/visit/end?reason=услуга_оказана
    API -> Visit: visitEnd(...)
  else очередь пуста
    API - -> Employee: 204 No Content
  end
end
opt Перерыв
  Employee -> API: POST /servicepoint/.../servicePoints/{servicePointId}/close?isBreak=true&breakReason=обед
  API -> Visit: closeServicePoint(...)
  Employee -> API: POST /servicepoint/.../open
  API -> Visit: openServicePoint(...)
end

Employee -> API: POST /servicepoint/.../servicePoints/{servicePointId}/close?reason=конец_смены
API -> Visit: closeServicePoint(...)
@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.2+13-58
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>