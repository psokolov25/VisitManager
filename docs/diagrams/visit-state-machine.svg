<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1032px" preserveAspectRatio="none" style="width:1508px;height:1032px;" version="1.1" viewBox="0 0 1508 1032" width="1508px" zoomAndPan="magnify"><defs><filter height="300%" id="f5h44egofjplz" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><rect width="100%" height="100%" fill="#FFFFFF"/><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="244" x="564" y="16.708">Жизненный цикл визита</text><rect fill="#FEFECE" filter="url(#f5h44egofjplz)" height="52.5938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="1087.5" y="125.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1087.5" x2="1184.5" y1="168.5469" y2="168.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="1109" y="143.9482">Создан</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="1097.5" y="160.2451">(CREATED)</text><rect fill="#FEFECE" filter="url(#f5h44egofjplz)" height="52.5938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="164" x="603" y="270.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="603" x2="767" y1="313.5469" y2="313.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="143" x="613.5" y="288.9482">Очередь ожидания</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="144" x="613" y="305.2451">(WAITING_IN_QUEUE)</text><rect fill="#FEFECE" filter="url(#f5h44egofjplz)" height="52.5938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="960.5" y="415.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="960.5" x2="1043.5" y1="458.5469" y2="458.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="975" y="433.9482">Вызван</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="970.5" y="450.2451">(CALLED)</text><rect fill="#FEFECE" filter="url(#f5h44egofjplz)" height="52.5938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="316.5" y="125.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="316.5" x2="445.5" y1="168.5469" y2="168.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="326.5" y="143.9482">Обслуживание</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="345.5" y="160.2451">(SERVING)</text><rect fill="#FEFECE" filter="url(#f5h44egofjplz)" height="52.5938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="198" x="470" y="720.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="470" x2="668" y1="763.5469" y2="763.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="511" y="738.9482">Пул сотрудника</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="178" x="480" y="755.2451">(WAITING_IN_USER_POOL)</text><rect fill="#FEFECE" filter="url(#f5h44egofjplz)" height="52.5938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="219" x="857.5" y="560.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="857.5" x2="1076.5" y1="603.5469" y2="603.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="183" x="875.5" y="578.9482">Пул точки обслуживания</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="199" x="867.5" y="595.2451">(WAITING_IN_SERVICE_POOL)</text><rect fill="#FEFECE" filter="url(#f5h44egofjplz)" height="52.5938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="522" y="865.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="522" x2="616" y1="908.5469" y2="908.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="532" y="883.9482">Завершён</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="549" y="900.2451">(END)</text><ellipse cx="1136" cy="38.9531" fill="#000000" filter="url(#f5h44egofjplz)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><ellipse cx="445" cy="999.9531" fill="none" filter="url(#f5h44egofjplz)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="445.5" cy="1000.4531" fill="#000000" rx="6" ry="6" style="stroke: none; stroke-width: 1.0;"/><path d="M480.5,132.4531 L480.5,148.4531 L445.58,152.4531 L480.5,156.4531 L480.5,172.7188 A0,0 0 0 0 480.5,172.7188 L949.5,172.7188 A0,0 0 0 0 949.5,172.7188 L949.5,142.4531 L939.5,132.4531 L480.5,132.4531 A0,0 0 0 0 480.5,132.4531 " fill="#FBFB77" filter="url(#f5h44egofjplz)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M939.5,132.4531 L939.5,142.4531 L949.5,142.4531 L939.5,132.4531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="448" x="486.5" y="149.52">STOP_SERVING и события добавления услуг фиксируют прогресс,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="416" x="486.5" y="164.6528">но не меняют состояние визита (см. VisitEvent.visitStateMap).</text><path d="M490.5,979.9531 L490.5,1020.2188 A0,0 0 0 0 490.5,1020.2188 L895.5,1020.2188 A0,0 0 0 0 895.5,1020.2188 L895.5,989.9531 L885.5,979.9531 L674.64,979.9531 L599.02,918.9931 L666.64,979.9531 L490.5,979.9531 A0,0 0 0 0 490.5,979.9531 " fill="#FBFB77" filter="url(#f5h44egofjplz)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M885.5,979.9531 L885.5,989.9531 L895.5,989.9531 L885.5,979.9531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="384" x="496.5" y="997.02">Состояние END охватывает завершение обслуживания,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="496.5" y="1012.1528">удаление визита и сценарии NO_SHOW.</text><!--MD5=[fce0a99ff020773a13d941767c2fc94a]
link *start to Created--><path d="M1136,49.0731 C1136,64.5231 1136,96.4731 1136,120.6031 " fill="none" id="*start-&gt;Created" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1136,125.6231,1140,116.6231,1136,120.6231,1132,116.6231,1136,125.6231" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="1137" y="92.02">CREATED</text><!--MD5=[25ff0fd9add52d8ee374fcbef20e16c0]
link Created to Queue--><path d="M1087.31,168.8931 C1011.56,192.9131 864.49,239.5431 770.7,269.2831 " fill="none" id="Created-&gt;Queue" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="765.72,270.8631,775.5093,271.9448,770.4844,269.3465,773.0827,264.3217,765.72,270.8631" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="951" y="229.52">PLACED_IN_QUEUE</text><!--MD5=[ca3767f71f613651f3e96cdfdcfede73]
link Created to Called--><path d="M1138.17,179.1231 C1140.02,213.7631 1139.46,276.5931 1117,323.9531 C1100.05,359.6931 1067.75,391.1731 1041.69,412.5331 " fill="none" id="Created-&gt;Called" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1037.56,415.8731,1047.0731,413.3233,1041.4476,412.7288,1042.0421,407.1033,1037.56,415.8731" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="1134" y="302.02">CALLED</text><!--MD5=[c69653069dc898239bcb85939b1373bd]
link Queue to Called--><path d="M767.21,311.8031 C805.77,320.2731 851.4,333.5931 889,353.9531 C907.83,364.1431 908.3,372.5631 925,385.9531 C936.34,395.0431 949,404.4531 960.73,412.8831 " fill="none" id="Queue-&gt;Called" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="965,415.9431,960.0239,407.4438,960.9391,413.0261,955.3567,413.9413,965,415.9431" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="926" y="374.52">CALLED</text><!--MD5=[650e4d604201cf04415f0acb0ee7fc18]
link Called to Queue--><path d="M960.47,424.5631 C951.52,421.3531 942.03,418.2831 933,415.9531 C847.24,393.8231 809.24,435.7531 736,385.9531 C716.16,372.4631 702.98,348.5031 695,329.0531 " fill="none" id="Called-&gt;Queue" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="693.08,324.2231,692.6825,334.064,694.9246,328.8704,700.1182,331.1126,693.08,324.2231" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="752.5" y="367.02">BACK_TO_QUEUE</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="737" y="382.1528">TRANSFER_TO_QUEUE</text><!--MD5=[b9cdd3f777eec21180e10c4c1263b4ed]
link Queue to UserPool--><path d="M670.8,324.2631 C659.47,343.1131 642.17,368.3531 622,385.9531 C541.24,456.3931 464.24,407.1231 409,498.9531 C360.58,579.4531 463.9,671.7831 526.22,717.5731 " fill="none" id="Queue-&gt;UserPool" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="530.64,720.7931,525.7176,712.2626,526.5976,717.8506,521.0096,718.7305,530.64,720.7931" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="410" y="519.52">TRANSFER_TO_USER_POOL</text><!--MD5=[9467c62cbf5cb8e5c8aa5cf8010442c2]
link Queue to ServicePool--><path d="M680.36,324.0531 C675.33,360.0431 671.76,425.9831 703,468.9531 C738.37,517.6031 798.5,546.4531 852.45,563.3831 " fill="none" id="Queue-&gt;ServicePool" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="857.32,564.8831,849.893,558.4148,852.5408,563.4137,847.5419,566.0615,857.32,564.8831" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="704" y="447.02">TRANSFER_TO_SERVICE_POINT_POOL</text><!--MD5=[18da1422720216ff3887c51fb3eaef3e]
link Queue to End--><path d="M602.8,300.8831 C543.61,305.7831 463.66,319.0531 402,353.9531 C356.4,379.7631 323,389.0631 323,441.4531 C323,441.4531 323,441.4531 323,748.4531 C323,837.3431 444.53,871.9231 516.75,884.6231 " fill="none" id="Queue-&gt;End" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="521.86,885.5031,513.6631,880.0433,516.9315,884.6603,512.3145,887.9288,521.86,885.5031" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="339" y="584.52">END</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="324" y="599.6528">DELETED</text><!--MD5=[c3d10b07d8d324e16caf29769a161dfd]
link Called to Serving--><path d="M1001.29,415.7131 C999.57,396.8931 994.61,371.6631 981,353.9531 C898.48,246.5731 842.07,249.9631 713,208.9531 C606.35,175.0631 572.44,202.3331 463,178.9531 C458.91,178.0831 454.74,177.0931 450.54,176.0231 " fill="none" id="Called-&gt;Serving" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="445.61,174.7431,453.3118,180.8817,450.4487,176.0029,455.3275,173.1398,445.61,174.7431" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="955" y="302.02">START_SERVING</text><!--MD5=[d2747eb4b029bedc86b7bc064a1f7693]
link Called to UserPool--><path d="M960.42,465.5631 C957.28,466.8231 954.12,467.9731 951,468.9531 C863.97,496.2331 604.73,487.2531 551,560.9531 C517.66,606.6831 538.28,676.5031 554.68,716.1631 " fill="none" id="Called-&gt;UserPool" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="556.66,720.8431,556.854,710.9962,554.7197,716.2349,549.4809,714.1006,556.66,720.8431" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="567.5" y="584.52">BACK_TO_USER_POOL</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="552" y="599.6528">TRANSFER_TO_USER_POOL</text><!--MD5=[b2706a93e5bbeb12a72bdb97d1307c63]
link UserPool to Called--><path d="M579.85,720.9431 C590.98,697.7031 610.42,664.0331 637,643.9531 C671.99,617.5231 693.14,636.0831 731,613.9531 C760.86,596.4931 759.96,581.2131 788,560.9531 C817.24,539.8331 902.21,494.8531 955.86,467.0731 " fill="none" id="UserPool-&gt;Called" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="960.31,464.7731,950.4793,465.3714,955.8727,467.0776,954.1665,472.471,960.31,464.7731" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="789" y="592.02">CALLED</text><!--MD5=[3477e28cf5a868ae9e90e02ecb1317d3]
link Called to ServicePool--><path d="M995.74,469.0231 C989.81,493.2731 980.88,529.7431 974.55,555.6031 " fill="none" id="Called-&gt;ServicePool" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="973.32,560.6231,979.3403,552.8285,974.5058,555.7658,971.5685,550.9313,973.32,560.6231" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="207" x="1003.5" y="512.02">BACK_TO_SERVICE_POINT_POOL</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="988" y="527.1528">TRANSFER_TO_SERVICE_POINT_POOL</text><!--MD5=[b6290248f67a3b51458b2886c41bbc6f]
link ServicePool to Called--><path d="M939.32,560.7931 C923.98,543.3531 910.04,519.7531 921,498.9531 C928.71,484.3331 942.2,472.8231 955.98,464.1631 " fill="none" id="ServicePool-&gt;Called" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="960.27,461.5731,950.5006,462.8214,955.9952,464.1665,954.65,469.6611,960.27,461.5731" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="922" y="519.52">CALLED</text><!--MD5=[40288bf04692ed2920d0147a5eee25d3]
link Called to End--><path d="M1043.52,447.2631 C1103.97,453.7731 1211.58,469.2931 1235,498.9531 C1288.03,566.1031 1496.55,425.3531 1170,773.9531 C1095.35,853.6431 753.59,881.0931 621.4,888.8331 " fill="none" id="Called-&gt;End" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="616.03,889.1431,625.2441,892.6217,621.0218,888.8571,624.7864,884.6348,616.03,889.1431" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="1305.5" y="657.02">END</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="1286" y="672.1528">NO_SHOW</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="1290.5" y="687.2856">DELETED</text><!--MD5=[3a3da4af04f72194bf24aecfbd001aac]
link Called to Called--><path d="M1043.71,429.1631 C1062.36,427.9031 1078.5,432.3331 1078.5,442.4531 C1078.5,451.6331 1065.25,456.1231 1048.88,455.9431 " fill="none" id="Called-&gt;Called" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1043.71,455.7431,1052.5429,460.0996,1048.706,455.943,1052.8627,452.106,1043.71,455.7431" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="1084.5" y="447.02">RECALLED</text><!--MD5=[d3d20367c78bf3e738a2b9239e3eca73]
link Serving to Queue--><path d="M435.35,179.0231 C489,204.2531 570.81,242.7431 626.02,268.7131 " fill="none" id="Serving-&gt;Queue" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="630.61,270.8731,624.1664,263.4246,626.0849,268.7462,620.7633,270.6647,630.61,270.8731" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="576.5" y="222.02">BACK_TO_QUEUE</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="561" y="237.1528">TRANSFER_TO_QUEUE</text><!--MD5=[0899a712f917b79753508803c4a2a629]
link Serving to UserPool--><path d="M316.23,157.7131 C231.59,167.1931 94,197.7831 94,296.4531 C94,296.4531 94,296.4531 94,588.4531 C94,665.9431 324.5,712.1431 464.36,733.0431 " fill="none" id="Serving-&gt;UserPool" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="469.71,733.8431,461.3895,728.5735,464.7634,733.114,460.2229,736.488,469.71,733.8431" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="95" y="447.02">TRANSFER_TO_USER_POOL</text><!--MD5=[156b416eaf85f83b386418802ab84eec]
link Serving to ServicePool--><path d="M379.39,179.1231 C377.85,225.4231 380.98,323.8331 429,385.9531 C518.11,501.2231 585.69,482.2431 723,530.9531 C735.89,535.5231 795.16,549.0331 852.05,561.5731 " fill="none" id="Serving-&gt;ServicePool" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="857.19,562.7131,849.272,556.856,852.3091,561.6285,847.5366,564.6655,857.19,562.7131" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="430" y="374.52">TRANSFER_TO_SERVICE_POINT_POOL</text><!--MD5=[f29cbcf5da3156ea5a93307abe0e1559]
link Serving to End--><path d="M316.28,157.0931 C258.54,162.4731 173.03,175.8331 106,208.9531 C53.06,235.1131 6,237.3931 6,296.4531 C6,296.4531 6,296.4531 6,748.4531 C6,853.2431 377.05,882.1331 516.7,889.3031 " fill="none" id="Serving-&gt;End" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="521.97,889.5631,513.1747,885.1312,516.9759,889.3206,512.7865,893.1218,521.97,889.5631" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="22" y="512.02">END</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="7" y="527.1528">DELETED</text><!--MD5=[24baea31720b7c1397434187b2d2b0bf]
link UserPool to ServicePool--><path d="M668.29,743.9631 C725.14,738.5331 795.73,724.6831 850,690.9531 C872.35,677.0631 866.91,662.0631 886,643.9531 C896.24,634.2331 908.34,624.9931 920.01,616.9431 " fill="none" id="UserPool-&gt;ServicePool" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="924.29,614.0331,914.6004,615.7972,920.1586,616.8494,919.1064,622.4075,924.29,614.0331" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="887" y="672.02">TRANSFER_TO_SERVICE_POINT_POOL</text><!--MD5=[70016419b9668e6826373c3313e1a8b0]
link ServicePool to UserPool--><path d="M857.46,608.8731 C848.17,610.5931 838.92,612.3031 830,613.9531 C757.13,627.4031 728.1,603.5331 666,643.9531 C644.82,657.7431 650.87,672.1331 634,690.9531 C625.68,700.2331 615.82,709.4031 606.33,717.5231 " fill="none" id="ServicePool-&gt;UserPool" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="602.29,720.9431,611.7489,718.199,606.1123,717.7198,606.5916,712.0833,602.29,720.9431" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="667" y="672.02">TRANSFER_TO_USER_POOL</text><!--MD5=[a9e3b4a53605d9d6aa05ee0533c20ebf]
link UserPool to End--><path d="M569,774.0231 C569,798.2731 569,834.7431 569,860.6031 " fill="none" id="UserPool-&gt;End" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="569,865.6231,573,856.6231,569,860.6231,565,856.6231,569,865.6231" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="585" y="817.02">END</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="570" y="832.1528">DELETED</text><!--MD5=[f2d1f33536f5cd8bca76727d52e594b7]
link ServicePool to End--><path d="M1076.65,605.1131 C1097.55,613.4131 1116.95,625.7231 1130,643.9531 C1142.16,660.9431 1142.03,673.8731 1130,690.9531 C1010.99,859.8731 736.07,887.2531 621.07,891.1331 " fill="none" id="ServicePool-&gt;End" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="616.04,891.2931,625.1612,895.0084,621.0375,891.1361,624.9099,887.0124,616.04,891.2931" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="1118" y="744.52">END</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="1103" y="759.6528">DELETED</text><!--MD5=[e940aefad32cde5d874e646c70da8b5c]
link End to *end--><path d="M538.98,918.9931 C512.33,941.6731 474.81,973.5831 456.28,989.3631 " fill="none" id="End-&gt;*end" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="452.41,992.6531,461.8577,989.871,456.2193,989.4145,456.6759,983.7761,452.41,992.6531" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[0df00913f4c426632e560f3682e2e858]
@startuml
skinparam backgroundColor #FFFFFF

title Жизненный цикл визита

state "Создан\n(CREATED)" as Created
state "Очередь ожидания\n(WAITING_IN_QUEUE)" as Queue
state "Вызван\n(CALLED)" as Called
state "Обслуживание\n(SERVING)" as Serving
state "Пул сотрудника\n(WAITING_IN_USER_POOL)" as UserPool
state "Пул точки обслуживания\n(WAITING_IN_SERVICE_POOL)" as ServicePool
state "Завершён\n(END)" as End <<final>>

[*] - -> Created : CREATED

Created - -> Queue : PLACED_IN_QUEUE
Created - -> Called : CALLED

Queue - -> Called : CALLED
Queue - -> UserPool : TRANSFER_TO_USER_POOL
Queue - -> ServicePool : TRANSFER_TO_SERVICE_POINT_POOL
Queue - -> End : END\nDELETED

Called - -> Serving : START_SERVING
Called - -> Queue : BACK_TO_QUEUE\nTRANSFER_TO_QUEUE
Called - -> UserPool : BACK_TO_USER_POOL\nTRANSFER_TO_USER_POOL
Called - -> ServicePool : BACK_TO_SERVICE_POINT_POOL\nTRANSFER_TO_SERVICE_POINT_POOL
Called - -> End : END\nNO_SHOW\nDELETED
Called - -> Called : RECALLED

Serving - -> Queue : BACK_TO_QUEUE\nTRANSFER_TO_QUEUE
Serving - -> UserPool : TRANSFER_TO_USER_POOL
Serving - -> ServicePool : TRANSFER_TO_SERVICE_POINT_POOL
Serving - -> End : END\nDELETED

UserPool - -> Called : CALLED
UserPool - -> ServicePool : TRANSFER_TO_SERVICE_POINT_POOL
UserPool - -> End : END\nDELETED

ServicePool - -> Called : CALLED
ServicePool - -> UserPool : TRANSFER_TO_USER_POOL
ServicePool - -> End : END\nDELETED

End - -> [*]

note right of Serving
  STOP_SERVING и события добавления услуг фиксируют прогресс,
  но не меняют состояние визита (см. VisitEvent.visitStateMap).
end note

note bottom of End
  Состояние END охватывает завершение обслуживания,
  удаление визита и сценарии NO_SHOW.
end note

@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.2+13-58
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>