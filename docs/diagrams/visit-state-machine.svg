<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1081px" preserveAspectRatio="none" style="width:2052px;height:1081px;" version="1.1" viewBox="0 0 2052 1081" width="2052px" zoomAndPan="magnify"><defs><filter height="300%" id="f1ieyh6nwxuwiq" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><rect width="100%" height="100%" fill="#FFFFFF"/><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="456" x="801.5" y="16.708">Жизненный цикл визита и связанные события</text><rect fill="#FEFECE" filter="url(#f1ieyh6nwxuwiq)" height="52.5938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="509.5" y="195.4531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="509.5" x2="606.5" y1="238.0469" y2="238.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="531" y="213.4482">Создан</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="519.5" y="229.7451">(CREATED)</text><rect fill="#FEFECE" filter="url(#f1ieyh6nwxuwiq)" height="52.5938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="176" x="279" y="394.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="279" x2="455" y1="437.5469" y2="437.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="156" x="289" y="412.9482">В очереди ожидания</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="144" x="295" y="429.2451">(WAITING_IN_QUEUE)</text><rect fill="#FEFECE" filter="url(#f1ieyh6nwxuwiq)" height="52.5938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="654.5" y="524.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="654.5" x2="737.5" y1="567.5469" y2="567.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="669" y="542.9482">Вызван</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="664.5" y="559.2451">(CALLED)</text><rect fill="#FEFECE" filter="url(#f1ieyh6nwxuwiq)" height="52.5938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="136" x="1127" y="195.4531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1127" x2="1263" y1="238.0469" y2="238.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="1137" y="213.4482">Обслуживается</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="1159.5" y="229.7451">(SERVING)</text><rect fill="#FEFECE" filter="url(#f1ieyh6nwxuwiq)" height="52.5938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="198" x="514" y="784.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="514" x2="712" y1="827.5469" y2="827.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="159" x="533.5" y="802.9482">Ожидает сотрудника</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="178" x="524" y="819.2451">(WAITING_IN_USER_POOL)</text><rect fill="#FEFECE" filter="url(#f1ieyh6nwxuwiq)" height="52.5938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="244" x="585" y="654.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="585" x2="829" y1="697.5469" y2="697.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="224" x="595" y="672.9482">Ожидает точку обслуживания</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="199" x="607.5" y="689.2451">(WAITING_IN_SERVICE_POOL)</text><rect fill="#FEFECE" filter="url(#f1ieyh6nwxuwiq)" height="52.5938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="332" y="914.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="332" x2="426" y1="957.5469" y2="957.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="342" y="932.9482">Завершён</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="359" y="949.2451">(END)</text><ellipse cx="558" cy="38.9531" fill="#000000" filter="url(#f1ieyh6nwxuwiq)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><path d="M1298.5,125.9531 L1298.5,217.9531 L1263.23,221.9531 L1298.5,225.9531 L1298.5,317.5469 A0,0 0 0 0 1298.5,317.5469 L1583.5,317.5469 A0,0 0 0 0 1583.5,317.5469 L1583.5,135.9531 L1573.5,125.9531 L1298.5,125.9531 A0,0 0 0 0 1298.5,125.9531 " fill="#FBFB77" filter="url(#f1ieyh6nwxuwiq)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1573.5,125.9531 L1573.5,135.9531 L1583.5,135.9531 L1573.5,125.9531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="212" x="1304.5" y="143.02">События без смены состояния:</text><ellipse cx="1310" cy="153.7188" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="1315.5" y="158.1528">ADD_SERVICE</text><ellipse cx="1310" cy="168.8516" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="1315.5" y="173.2856">ADDED_DELIVERED_SERVICE</text><ellipse cx="1310" cy="183.9844" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="1315.5" y="188.4185">ADDED_DELIVERED_SERVICE_RESULT</text><ellipse cx="1310" cy="199.1172" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="164" x="1315.5" y="203.5513">ADDED_SERVICE_RESULT</text><ellipse cx="1310" cy="214.25" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="1315.5" y="218.6841">ADDED_MARK</text><ellipse cx="1310" cy="229.3828" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="1315.5" y="233.8169">ADDED_NOTE</text><ellipse cx="1310" cy="244.5156" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="1315.5" y="248.9497">DELETED_MARK</text><ellipse cx="1310" cy="259.6484" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="1315.5" y="264.0825">DELETED_DELIVERED_SERVICE</text><ellipse cx="1310" cy="274.7813" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="253" x="1315.5" y="279.2153">DELETED_DELIVERED_SERVICE_RESULT</text><ellipse cx="1310" cy="289.9141" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="1315.5" y="294.3481">DELETED_SERVICE_RESULT</text><ellipse cx="1310" cy="305.0469" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="1315.5" y="309.481">STOP_SERVING</text><path d="M6,1028.9531 L6,1069.2188 A0,0 0 0 0 6,1069.2188 L474,1069.2188 A0,0 0 0 0 474,1069.2188 L474,1038.9531 L464,1028.9531 L269.06,1028.9531 L345.35,967.9931 L261.06,1028.9531 L6,1028.9531 A0,0 0 0 0 6,1028.9531 " fill="#FBFB77" filter="url(#f1ieyh6nwxuwiq)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M464,1028.9531 L464,1038.9531 L474,1038.9531 L464,1028.9531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="447" x="12" y="1046.02">Также фиксируются системные события VISIT_END_TRANSACTION</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="446" x="12" y="1061.1528">и VISIT_TRANSFER_FROM_QUEUE без изменения состояния визита.</text><ellipse cx="519" cy="1048.9531" fill="none" filter="url(#f1ieyh6nwxuwiq)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="519.5" cy="1049.4531" fill="#000000" rx="6" ry="6" style="stroke: none; stroke-width: 1.0;"/><!--MD5=[fce0a99ff020773a13d941767c2fc94a]
link *start to Created--><path d="M558,49.1731 C558,74.8131 558,147.7631 558,189.8931 " fill="none" id="*start-&gt;Created" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="558,195.1231,562,186.1231,558,190.1231,554,186.1231,558,195.1231" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="559" y="92.02">CREATED</text><!--MD5=[b465297646b8c6033683b47e8fde4165]
link Created to WaitingQueue--><path d="M509.38,247.5731 C471.4,269.1731 420.03,303.9631 389,347.9531 C380.29,360.3031 374.97,376.1731 371.74,389.9131 " fill="none" id="Created-&gt;WaitingQueue" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="370.65,394.8631,376.5071,386.9452,371.7347,389.9822,368.6976,385.2097,370.65,394.8631" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="390" y="361.02">PLACED_IN_QUEUE</text><!--MD5=[ca3767f71f613651f3e96cdfdcfede73]
link Created to Called--><path d="M596.5,248.5831 C628.88,271.6131 674.76,307.9131 706,347.9531 C736.44,386.9731 723.67,409.6331 755,447.9531 C768.84,464.8831 784.34,458.3331 794,477.9531 C807.58,505.5231 774.21,525.1531 742.79,536.9631 " fill="none" id="Created-&gt;Called" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="737.77,538.7931,747.5964,539.4574,742.4656,537.0752,744.8478,531.9444,737.77,538.7931" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="756" y="426.02">CALLED / RECALLED</text><!--MD5=[dc1d477c2e85beb0bfbfa6c5b4df9cdb]
link WaitingQueue to Called--><path d="M455.16,425.5931 C510.77,431.0531 582.17,444.6931 637,477.9531 C654.12,488.3431 668.45,505.5531 678.69,520.6031 " fill="none" id="WaitingQueue-&gt;Called" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="681.47,524.7931,679.8059,515.0859,678.6965,520.6329,673.1495,519.5235,681.47,524.7931" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="657" y="491.02">CALLED / RECALLED</text><!--MD5=[fd1ad1e409a7de8eeac8eeb6fa79afbc]
link Called to WaitingQueue--><path d="M654.39,542.4831 C626.81,537.2731 589.79,530.4531 557,524.9531 C513.33,517.6231 388.86,528.5431 360,494.9531 C350.31,483.6731 351,467.4731 354.57,453.2331 " fill="none" id="Called-&gt;WaitingQueue" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="356.01,448.0931,349.739,455.6875,354.6666,452.9093,357.4448,457.8369,356.01,448.0931" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="267" x="361" y="491.02">BACK_TO_QUEUE / TRANSFER_TO_QUEUE</text><!--MD5=[da1c0cbbe5c91911e0da5c6190313ad1]
link WaitingQueue to WaitingUser--><path d="M340.47,448.1631 C304.04,486.7631 246.21,561.8731 276,624.9531 C314.83,707.1831 353.96,711.7931 434,754.9531 C457.09,767.4031 483.39,777.5131 508.59,785.5331 " fill="none" id="WaitingQueue-&gt;WaitingUser" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="513.61,787.1031,506.2061,780.6083,508.8361,785.6166,503.8277,788.2466,513.61,787.1031" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="277" y="621.02">TRANSFER_TO_USER_POOL</text><!--MD5=[a06a208ebd908f36bd4b302f1b389718]
link WaitingQueue to WaitingService--><path d="M351.74,448.2331 C345.44,462.0631 340.53,479.4031 345,494.9531 C357.02,536.7931 362.75,551.0831 397,577.9531 C429.29,603.2831 524.26,632.7631 600.65,653.5831 " fill="none" id="WaitingQueue-&gt;WaitingService" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="605.65,654.9431,598.0165,648.7198,600.8255,653.63,595.9154,656.439,605.65,654.9431" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="398" y="556.02">TRANSFER_TO_SERVICE_POINT_POOL</text><!--MD5=[a7449a7304d4bd29c65dbda242436b46]
link WaitingQueue to End--><path d="M278.64,437.9331 C178.49,458.0631 29,497.0431 29,550.4531 C29,550.4531 29,550.4531 29,812.4531 C29,875.0631 229.04,916.1631 326.66,932.4931 " fill="none" id="WaitingQueue-&gt;End" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="331.8,933.3431,323.5724,927.9296,326.8669,932.5281,322.2683,935.8226,331.8,933.3431" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="30" y="686.02">NO_SHOW / END / DELETED</text><!--MD5=[c3d10b07d8d324e16caf29769a161dfd]
link Called to Serving--><path d="M737.76,534.2131 C762.51,524.0231 794.18,510.0031 821,494.9531 C853.04,476.9731 859.55,469.9131 889,447.9531 C919.16,425.4631 925.03,417.6931 955,394.9531 C1023.57,342.9131 1105.46,285.1331 1153.68,251.5331 " fill="none" id="Called-&gt;Serving" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1157.95,248.5631,1148.2791,250.427,1153.8478,251.4218,1152.853,256.9905,1157.95,248.5631" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="956" y="426.02">START_SERVING</text><!--MD5=[0111e0185fde48f295ce8b1fd270be4a]
link Serving to Called--><path d="M1187.41,248.5331 C1172.17,295.3931 1133.31,395.0631 1065,447.9531 C967.72,523.2831 818.26,543.2631 742.89,548.5531 " fill="none" id="Serving-&gt;Called" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="737.6,548.9131,746.8436,552.3126,742.5892,548.5843,746.3175,544.3299,737.6,548.9131" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="1114" y="426.02">CALLED / RECALLED</text><!--MD5=[bd9fa31f1e0ad9bcd3f985da07d74c69]
link Called to WaitingUser--><path d="M737.56,553.0131 C895.57,556.4531 1442.19,580.9231 1282,754.9531 C1244.61,795.5731 895.97,806.4731 717.39,809.3831 " fill="none" id="Called-&gt;WaitingUser" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="712.16,809.4731,721.2162,813.3442,717.1595,809.4017,721.1019,805.345,712.16,809.4731" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="329" x="1312" y="686.02">TRANSFER_TO_USER_POOL / BACK_TO_USER_POOL</text><!--MD5=[8aac4c21ab1deee2f4b2673cada3eeab]
link WaitingUser to Called--><path d="M513.68,788.9331 C493.12,780.9031 472.91,769.9231 457,754.9531 C424,723.8831 411.52,692.4431 437,654.9531 C461.67,618.6531 581.58,582.2931 649.25,564.2131 " fill="none" id="WaitingUser-&gt;Called" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="654.43,562.8431,644.7038,561.2936,649.5984,564.1297,646.7623,569.0242,654.43,562.8431" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="438" y="686.02">CALLED / RECALLED</text><!--MD5=[70d4a331bb3fa629094acf11f6cddfb7]
link Called to WaitingService--><path d="M707.94,578.1531 C711.61,587.3431 715.17,597.9231 717,607.9531 C719.5,621.6331 718.04,636.8731 715.54,649.8331 " fill="none" id="Called-&gt;WaitingService" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="714.49,654.8631,720.2359,646.8641,715.5063,649.9675,712.4029,645.2379,714.49,654.8631" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="457" x="719" y="621.02">TRANSFER_TO_SERVICE_POINT_POOL / BACK_TO_SERVICE_POINT_POOL</text><!--MD5=[7375ce7cccc8769b6336d7bdf37ea70f]
link WaitingService to Called--><path d="M612.08,654.7731 C599,647.2331 587.24,637.5031 579,624.9531 C558.15,593.1831 608.36,572.9031 649.38,562.1031 " fill="none" id="WaitingService-&gt;Called" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="654.34,560.8331,644.6282,559.1959,649.4969,562.076,646.6168,566.9448,654.34,560.8331" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="580" y="621.02">CALLED / RECALLED</text><!--MD5=[40288bf04692ed2920d0147a5eee25d3]
link Called to End--><path d="M654.39,574.4731 C651.26,575.7531 648.1,576.9331 645,577.9531 C570.01,602.5331 544.44,581.7531 470,607.9531 C357.78,647.4531 296.33,635.4131 236,737.9531 C197.82,802.8431 278.6,873.6131 333.59,911.9231 " fill="none" id="Called-&gt;End" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="337.83,914.8531,332.6995,906.4461,333.7165,912.0108,328.1518,913.0277,337.83,914.8531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="237" y="751.02">NO_SHOW / END / DELETED</text><!--MD5=[09c1127453aa697e6bfb687e4d1384ca]
link Serving to WaitingQueue--><path d="M1126.89,239.2031 C979.03,274.4731 628.43,358.0931 460.2,398.2231 " fill="none" id="Serving-&gt;WaitingQueue" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="455.28,399.3931,464.962,401.1985,460.1439,398.2344,463.108,393.4163,455.28,399.3931" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="659" y="361.02">TRANSFER_TO_QUEUE</text><!--MD5=[e3f8df51d8f327b213a49a1d794a2222]
link Serving to WaitingUser--><path d="M1211.64,248.7231 C1227.04,270.4731 1251.9,300.7331 1281,317.9531 C1450.46,418.2131 1712,223.5531 1712,420.4531 C1712,420.4531 1712,420.4531 1712,682.4531 C1712,781.9431 992.22,804.2331 717.67,809.1131 " fill="none" id="Serving-&gt;WaitingUser" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="712.47,809.2131,721.5372,813.0583,717.4693,809.1274,721.4001,805.0594,712.47,809.2131" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="1713" y="556.02">TRANSFER_TO_USER_POOL</text><!--MD5=[51d6dc51262a58ded9b083084d25861f]
link Serving to WaitingService--><path d="M1206.16,248.5531 C1219.9,281.6131 1242.49,341.2931 1251,394.9531 C1267.67,499.9831 1268.7,559.3531 1185,624.9531 C1132.14,666.3831 957.15,677.6631 834.28,680.3231 " fill="none" id="Serving-&gt;WaitingService" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="829.2,680.4331,838.2782,684.2524,834.199,680.3331,838.1182,676.254,829.2,680.4331" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="1260" y="491.02">TRANSFER_TO_SERVICE_POINT_POOL</text><!--MD5=[f29cbcf5da3156ea5a93307abe0e1559]
link Serving to End--><path d="M1210.53,248.8031 C1225.53,271.2331 1250.44,302.4631 1281,317.9531 C1413.38,385.0731 1941,272.0331 1941,420.4531 C1941,420.4531 1941,420.4531 1941,812.4531 C1941,889.9731 702.88,930.9231 431.26,938.9731 " fill="none" id="Serving-&gt;End" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="426.17,939.1231,435.2806,942.8645,431.168,938.9803,435.0521,934.8677,426.17,939.1231" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="1942" y="621.02">END / DELETED</text><!--MD5=[8c141124d5e5ff23668677e30aeb7863]
link WaitingUser to WaitingService--><path d="M712.26,793.9731 C754.68,784.7131 797.37,771.6331 810,754.9531 C823.37,737.2931 810.04,722.2631 789.03,710.5331 " fill="none" id="WaitingUser-&gt;WaitingService" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="784.44,708.0831,790.4949,715.8509,788.8506,710.4383,794.2632,708.794,784.44,708.0831" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="457" x="816" y="751.02">TRANSFER_TO_SERVICE_POINT_POOL / BACK_TO_SERVICE_POINT_POOL</text><!--MD5=[eeae90f3e545ee6234de3f57334da000]
link WaitingService to WaitingUser--><path d="M584.92,704.3531 C531.4,715.1931 478.86,728.0331 471,737.9531 C452.08,761.8431 475.69,778.5931 508.75,789.9231 " fill="none" id="WaitingService-&gt;WaitingUser" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="513.69,791.5531,506.3988,784.932,508.9423,789.9848,503.8895,792.5283,513.69,791.5531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="329" x="472" y="751.02">TRANSFER_TO_USER_POOL / BACK_TO_USER_POOL</text><!--MD5=[28cf6fa515f27fb8ffe5e36d1e837ef6]
link WaitingUser to End--><path d="M566.21,838.0531 C526.99,859.5031 471.07,890.0931 430.57,912.2431 " fill="none" id="WaitingUser-&gt;End" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="425.71,914.9031,435.5265,914.105,430.0995,912.5089,431.6957,907.0819,425.71,914.9031" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="512" y="881.02">END / DELETED</text><!--MD5=[ed088b33f6edb6ccddd3abadc96ae5bd]
link WaitingService to End--><path d="M584.71,707.1431 C527.58,719.1231 469.38,732.1631 457,737.9531 C426,752.4531 412.76,755.1131 396,784.9531 C374.17,823.8431 373.35,876.8231 375.57,909.8131 " fill="none" id="WaitingService-&gt;End" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="375.95,914.9331,379.2967,905.6703,375.5927,909.9459,371.3172,906.2419,375.95,914.9331" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="397" y="816.02">END / DELETED</text><!--MD5=[e940aefad32cde5d874e646c70da8b5c]
link End to *end--><path d="M412.89,967.9931 C443.56,991.1031 486.98,1023.8231 507.45,1039.2531 " fill="none" id="End-&gt;*end" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="511.46,1042.2731,506.66,1033.6731,507.46,1039.2731,501.86,1040.0731,511.46,1042.2731" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[19faf3bee218c9387a9e651c6f441225]
@startuml
skinparam backgroundColor #FFFFFF

title Жизненный цикл визита и связанные события

state "Создан\n(CREATED)" as Created
state "В очереди ожидания\n(WAITING_IN_QUEUE)" as WaitingQueue
state "Вызван\n(CALLED)" as Called
state "Обслуживается\n(SERVING)" as Serving
state "Ожидает сотрудника\n(WAITING_IN_USER_POOL)" as WaitingUser
state "Ожидает точку обслуживания\n(WAITING_IN_SERVICE_POOL)" as WaitingService
state "Завершён\n(END)" as End

[*] - -> Created : CREATED
Created - -> WaitingQueue : PLACED_IN_QUEUE
Created - -> Called : CALLED / RECALLED

WaitingQueue - -> Called : CALLED / RECALLED
WaitingQueue - -> WaitingUser : TRANSFER_TO_USER_POOL
WaitingQueue - -> WaitingService : TRANSFER_TO_SERVICE_POINT_POOL
WaitingQueue - -> End : NO_SHOW / END / DELETED

Called - -> Serving : START_SERVING
Called - -> WaitingQueue : BACK_TO_QUEUE / TRANSFER_TO_QUEUE
Called - -> WaitingUser : TRANSFER_TO_USER_POOL / BACK_TO_USER_POOL
Called - -> WaitingService : TRANSFER_TO_SERVICE_POINT_POOL / BACK_TO_SERVICE_POINT_POOL
Called - -> End : NO_SHOW / END / DELETED

Serving - -> Called : CALLED / RECALLED
Serving - -> WaitingQueue : TRANSFER_TO_QUEUE
Serving - -> WaitingUser : TRANSFER_TO_USER_POOL
Serving - -> WaitingService : TRANSFER_TO_SERVICE_POINT_POOL
Serving - -> End : END / DELETED

WaitingUser - -> Called : CALLED / RECALLED
WaitingUser - -> WaitingService : TRANSFER_TO_SERVICE_POINT_POOL / BACK_TO_SERVICE_POINT_POOL
WaitingUser - -> End : END / DELETED

WaitingService - -> Called : CALLED / RECALLED
WaitingService - -> WaitingUser : TRANSFER_TO_USER_POOL / BACK_TO_USER_POOL
WaitingService - -> End : END / DELETED

note right of Serving
  События без смены состояния:
  * ADD_SERVICE
  * ADDED_DELIVERED_SERVICE
  * ADDED_DELIVERED_SERVICE_RESULT
  * ADDED_SERVICE_RESULT
  * ADDED_MARK
  * ADDED_NOTE
  * DELETED_MARK
  * DELETED_DELIVERED_SERVICE
  * DELETED_DELIVERED_SERVICE_RESULT
  * DELETED_SERVICE_RESULT
  * STOP_SERVING
end note

note bottom of End
  Также фиксируются системные события VISIT_END_TRANSACTION
  и VISIT_TRANSFER_FROM_QUEUE без изменения состояния визита.
end note

End - -> [*]
@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.2+13-58
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>